

# 蓋蓋樂 (cover)
題目靈感 : [2024 全國賽 pD](https://nhspc2024.twpca.org/release/problems/problems.pdf)，[toj 570](https://toj.tfcis.org/oj/pro/570/)，[cses 2181](https://cses.fi/problemset/task/2181)



先觀察一下測資

| 測資編號 | $n \times m$     | 最佳數 $T$ | 特色     |
| -------- | ---------------- | ---------- | -------- |
| $01$     | $10 \times 10$   | $41$       | 很小     |
| $02$     | $10 \times 10$   | $23$       | 很小     |
| $03$     | $100 \times 100$ | $5000$     | 全空     |
| $04$     | $100 \times 100$ | $2646$     | 階梯     |
| $05$     | $100 \times 100$ | $0$        | $T=0$    |
| $06$     | $1 \times 10000$ | $4527$     | $n = 1$  |
| $07$     | $2 \times 5000$  | $4567$     | $n = 2$  |
| $08$     | $4 \times 2500$  | $4638$     | $n = 4$  |
| $09$     | $10 \times 1000$ | $3591$     | $n = 10$ |
| $10$     | $100 \times 100$ | $2109$     | 很正常   |

顯然 greedy 亂放會是錯的，但正常 greedy 03, 04, 05, 06 應該能過，其他都差不多能拿 0.4 的分數。

再加上手構測資 01, 02，可以拿到 60 分多。

接著你會 [cses 2181](https://cses.fi/problemset/task/2181) 的話，用一點插頭 DP ，你就可以過測資 07, 08, 09，就可以拿到 90 分上下，如果是一般比賽，你就該跳題了。

接著通靈一下，我們把每個可以放東西的格子視為一個點，兩個格子可以放骨牌的話就連一條邊。  
熟悉圖論的你就會發現我們要求的就是這一張圖的最大邊匹配，再想到題序西洋棋盤支解問題告訴你的，一個骨牌一定是一個黑格一個白格，所以這會是一張二分圖，就可以直接用 $O(VE)$ 的二分圖最大匹配算法快速做完了。

---

比賽當天晚上的 [ABC 407 G](https://atcoder.jp/contests/abc407/tasks/abc407_g) 就出了一題幾乎一樣的，變成有邊權而已，如果你當天有來打你就能秒掉了，Brinton 就不來寫。

<div style="page-break-after: always"></div>


# 夢中的數字 (more)
題目靈感 : 蔡孟宗選訓時講的

k = 1 時
有很多種作法，最直覺的應該是傳全部的總和，find 時總和減掉全部就好。

k = 2 時，考慮 k = 1 的作法，這樣我們是知道了 x + y ，如果你會寫 [Sum of Two Values](https://cses.fi/problemset/task/1640) 應該就可以找到所有符合的 (x, y) 了，但我們要怎麼確定是哪一組呢 ?

既然不知道要怎麼確定是哪一組，那我們就讓他高機率只有一組符合條件就好，於是我們就將原本的數字 map 到隨機的一個很大的數字，但要怎麼讓兩支程式相同數字map到相同數字 ?

很多種方法，可能可以 $x \leftarrow a^{x} \pmod p$，自己決定 $a, p$，或是把 $x$ 當亂數種子產生的第一個亂數。


k = 3 時同理，只是變成了 [Sum of Three Values](https://cses.fi/problemset/task/1641) 而已。


來算一下機率，假設我們是 $0$ 到 $C$ 中隨機數字。

有兩組以上相加都為 $r$ 的機率大概是 $O((1 - \frac{1}{C})^{n^k})$

用當 $p$ 很小時 $(1 - p)^t \approx 1 - pt$ 來估計， $C$ 取 $10^{12}$ 以上就很安全了， $C$ 取 $10^9$ 左右大機率會吃 WA。

<div style="page-break-after: always"></div>

# 隱藏的序列 (sequence)

題目靈感 : [tioj 1617](https://tioj.ck.tp.edu.tw/problems/1617) 、 [2024 全國賽測機 pB](https://nhspc2024.twpca.org/release/problems/rehearsal.pdf)、[BOI 2023 day 1 pB](https://cses.fi/481/list/)


因為一開始不知道要幹嘛，所以我們先隨機兩個數，把其他所有數都和這兩個數問過一次。

如此一來，我們就可以把數字分成三堆，最小值、中間值、最大值。  
那些問起來是中間值的地方就是原本的值，我們只要處理最小值和最大值就好。

在處理最小值時，我們從最大值那邊偷一個數字來，這樣中位數那個詢問就變成了丟兩個數 $a$, $b$ 進去，他會回傳 $\max(p_a, p_b)$。  
接著我們在要處理的那堆中挑一個數字 $x$，把那堆裡的其他數都跟他問一次，比 $x$ 小的都會回傳 $p_x$，比他大的就會是原本的值，這樣，我們數字隨機挑的話，期望上可以得出 $\Theta(n / 2)$ 個數的值，

我們只要一直遞迴重複直到最小值那堆只剩兩個數就處理完那堆了。

假設一開始最大值和最小值兩堆的大小都是 $\Theta(n/2)$ 我們就可以 $\Theta(n / 2) + \Theta(n / 4) + \Theta(n / 8) + ... = \Theta(n)$ 處理完最小值那邊，最大值那邊同理可以 $\Theta(n)$ 處理完。

再加上一開始花 $n$ 把元素分三堆，我們就可以總共花 $\Theta(3n)$ 次詢問得出來。

但大家都知道， $\Theta$ 是平均狀況，而評分是向上取整，且是取所有測資最多的那次，所以在那麼多筆測資下只要不小心問到比 $3n$ 多次你就只有 97.3 分而已了。

當我們在執行 "從最小值那堆隨機挑一個數字 $x$，把最小值裡的其他數都跟他問一次" 這個過程中，假設問第 $i$ 和第 $j$ 得出的東西是一樣的，那我們就可以知道這重複的元素一定是 $p_x$ 的值，而且可以知道 $p_i < p_x$ 且 $p_j < p_x$，所以我們接下來詢問時，可以把挑的那個數從 $x$ 換成 $i$，然後再花一次詢問把 $p_j$ 的值補上，如果你有先 shuffle 過，期望上大概只會進行 $\Theta(\log n)$ 次換數字的操作而已，所以我們就可以 $\Theta(n/2 + \log(n/2))$ 次操作之類的處理完最小值那邊。最大值那邊同理。

這樣，總共就只需要 $\Theta(2n + 2\log(n/2))$ 次詢問之類的就可以得出答案了。



<div style="page-break-after: always"></div>

# 又一個簡短的問題 (ShortAgain)

題目靈感 : 自己想的

首先我們考慮數字由大放到小，當我們放在 $V_t$ 時，這個數會和 $V_{t - 1}, V_{t - 2}, ..., V_{0}$ 中還沒放的數形成逆序數對，所以我們就 greedy 的由後往前 $k$ 還夠的話能放就放，可以證明這樣一定有一組放法恰形成 $k$ 個逆序數對，接著再把剩下沒放的數由前往後放，這樣就構造出來了。
